(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1660:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,O:()=>l});var s=r(5155),a=r(2115),u=r(5695);let o=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),n=(0,u.useRouter)();return(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("dades_usuaris")||"[]"),t=JSON.parse(localStorage.getItem("logged_user")||"null");if(t){let r=e.find(e=>e.nombre===t.nombre);r&&l(r)}},[]),(0,s.jsx)(o.Provider,{value:{user:r,login:(e,t)=>{let r=JSON.parse(localStorage.getItem("dades_usuaris")||"[]").find(r=>r.nombre===e&&r.contrasenya===t);return!!r&&(l(r),localStorage.setItem("logged_user",JSON.stringify(r)),!0)},register:(e,t)=>{let r=JSON.parse(localStorage.getItem("dades_usuaris")||"[]");if(!r.some(t=>t.nombre===e)){let s={id:Date.now(),nombre:e,contrasenya:t},a=[...r,s];return localStorage.setItem("dades_usuaris",JSON.stringify(a)),l(s),localStorage.setItem("logged_user",JSON.stringify(s)),!0}return!1},logout:()=>{l(null),localStorage.removeItem("logged_user"),n.push("/login")}},children:t})}function n(){let e=(0,a.useContext)(o);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},8651:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),a=r(2115),u=r(1660),o=r(5695);function l(){let{login:e}=(0,u.A)(),t=(0,o.useRouter)(),[r,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[d,c]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"max-w-sm mx-auto mt-20 p-6 bg-white rounded shadow",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Iniciar sesi\xf3n"}),(0,s.jsxs)("form",{onSubmit:s=>{s.preventDefault(),e(r,n)?t.push("/"):c("Usuario o contrase\xf1a incorrectos")},children:[(0,s.jsx)("input",{className:"w-full mb-2 p-2 border rounded",type:"text",placeholder:"Usuario",value:r,onChange:e=>l(e.target.value)}),(0,s.jsx)("input",{className:"w-full mb-2 p-2 border rounded",type:"password",placeholder:"Contrase\xf1a",value:n,onChange:e=>i(e.target.value)}),d&&(0,s.jsx)("p",{className:"text-red-500 mb-2",children:d}),(0,s.jsx)("button",{className:"w-full bg-blue-500 text-white p-2 rounded",type:"submit",children:"Entrar"})]}),(0,s.jsxs)("p",{className:"mt-4 text-center",children:["\xbfNo tienes cuenta? ",(0,s.jsx)("a",{href:"/register",className:"text-blue-600 underline",children:"Reg\xedstrate"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(8651)),_N_E=e.O()}]);